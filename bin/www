#!/usr/bin/env node
var debug = require("debug")("YUME");
var app = require("../app");
var MultiplayerServer = require("../src/javascript/backend/modules/MultiplayerServer");

app.set("webport", process.env.YUME_WEBPORT || 3000); // web server port
app.set("wssport", process.env.YUME_WSSPORT || 8000); // websocket server port
app.set("multiplayer", process.env.YUME_MULTIPLAYER || false); // multiplayer flag

var server = app.listen(app.get("webport"), function() {
  debug("INFO: Bootstrap: Web server listening on port " + server.address().port);
});

if(app.get("multiplayer") === "true"){
	var multiplayerServer = new MultiplayerServer(app.get("wssport"), function(){
		debug("INFO: Bootstrap: Multiplayer server listening on port " + app.get("wssport"));
	}).init();
}
